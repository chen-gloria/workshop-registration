<div class="row">

    {% if app.user.email is defined %}
        {% for workshop in workshops %}
        <div class="col-lg-6 col-xl-4 col-xxl-3">
            <div class="card d-block">
                {% for role in app.user.roles %}
                    {% if role == 'ROLE_ADMIN' %}
                    <div class="dropdown card-widgets">
                        <a href="#" class="dropdown-toggle arrow-none" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="dripicons-dots-3"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end" style="">
                            <!-- item-->
                            <a href="#" class="dropdown-item"><i class="mdi mdi-pencil me-1"></i>Edit</a>
                            <!-- item-->
                            <a href="#" class="dropdown-item"><i class="mdi mdi-delete me-1"></i>Delete</a>
                            <!-- item-->
                            <a href="#" class="dropdown-item"><i class="mdi mdi-email-outline me-1"></i>Invite</a>
                        </div>
                    </div>
                    {% endif %}
                {% endfor %}

                <div class="card-body">
                    <img class="card-img mb-2" src="{{ asset(workshop.programImageFilename) }}" style="width: 100px; height: 40px;" alt="project image cap">
                    <h4 class="mt-0"> <a href="#" class="text-title">{{ workshop.name }}</a></h4>
                    <div class="badge bg-success mb-3">Finished</div>
                    <p class="text-muted font-13 mb-3">
                        With supporting text below as a natural lead-in to additional contenposuere erat a ante...
                        <a href="#" class="fw-bold text-muted">view more</a>
                    </p>
                    <span class="pe-2 text-nowrap mb-2 d-inline-block">
                        <i class="uil-location-pin-alt text-muted"></i>
                        {{ workshop.location }}
                    </span>

                    <span class="text-nowrap mb-2 d-inline-block">
                        <i class="mdi mdi-comment-multiple-outline text-muted"></i>
                        {# {{ workshop.location }} #}
                        Online Live Stream
                    </span>
                    <br>
                    <span class="pe-2 text-nowrap mb-2 d-inline-block text-primary">
                        <i class="mdi mdi-calendar-start text-muted"></i>
                        <strong> {{ workshop.startsAt|date('Y-m-d H:i') }} </strong>
                    </span>
                    <br>
                    <span class="text-nowrap mb-2 d-inline-block">
                        <i class="mdi mdi-calendar-end text-muted"></i>
                        <strong> {{ workshop.endsAt|date('Y-m-d H:i') }} </strong>
                    </span>
                    <br>
                    <span> 
                        <i class="uil-pricetag-alt text-muted"></i>
                        <strong> Free </strong>
                    </span>

                    {# Progress Tooltip #}
                    <form action="{{ path('instructor_workshop_register', { id: workshop.id }) }}" method="POST">
                        <p class="mb-1">
                            <span class="text-nowrap mb-2 d-inline-block">
                                <p class="mb-2 fw-bold">
                                    <i class="mdi mdi-account-group text-muted"></i>
                                    <strong> {{ workshop.capacity }} </strong> Vacancies
                                    <span class="float-end text-dark">{{ workshop.capacityPercentage }}% sold out</span>
                                </p>
                                <div class="progress progress-sm">
                                    <div class="progress-bar" role="progressbar" aria-valuenow="{{ workshop.capacityPercentage }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ workshop.capacityPercentage }}%;"></div>
                                </div>
                            </span>
                            <br>

                            <a href="#" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="Mat Helme" class="d-inline-block">
                                <img src="{{ asset('images/profile/alien.png') }}" class="rounded-circle avatar-xs" alt="friend">
                            </a>
                            <a href="#" data-bs-container="#tooltip-container" data-bs-toggle="tooltip" data-bs-placement="top" title="Michael Zenaty" class="d-inline-block">
                                <img src="{{ asset('images/profile/astronaut.png') }}" class="rounded-circle avatar-xs" alt="friend">
                            </a>
                            <a href="#" class="d-inline-block text-dark fw-bold ms-2">
                                +{{ workshop.currentRegistered - 2 }} more
                            </a>

                            {% for role in app.user.roles %}
                                {% if role == 'ROLE_INSTRUCTOR' %}
                                    {% if workshop.statusCode == 1 and workshop.remainingCapacity > 0 %}
                                        <a href="{{ path('workshop_detail', {'id': workshop.id }) }}" class="d-inline-block btn btn-success float-right" style="width: 50%;">Register</a>
                                    {% elseif workshop.statusCode == 1 and workshop.remainingCapacity <= 0 %}
                                        <button type="button" class="d-inline-block btn btn-danger float-right" style="width: 50%; cursor: not-allowed;" disabled="disabled">Booked out</button>
                                    {% elseif  workshop.statusCode == 0 %}
                                        <button type="button" class="d-inline-block btn btn-primary float-right" style="width: 50%; cursor: not-allowed;" disabled="disabled">Ongoing</button>
                                    {% elseif  workshop.statusCode == -1 %}
                                        <button type="button" class="d-inline-block btn btn-secondary float-right" style="width: 50%; cursor: not-allowed;" disabled="disabled">Finished</button>
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        </p>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="container">
            <div class="col-lg-12 col-xxl-12">
                <h4> Please go to verify your email to see all the workshops. </h4>
            </div>
        </div>
    {% endif %}

</div>